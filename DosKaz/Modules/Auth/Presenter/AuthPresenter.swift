//
//  AuthPresenter.swift
//  Auth
//
//  Generated by ModuleGenerator.
//  Copyright Â© 2020-06-17 07:43:27 +0000 lobster.kz. All rights reserved.
//
import SharedCodeFramework

protocol AuthViewOutput {
	func viewIsReady()
}
		
class AuthPresenter: AuthViewOutput {
	
	weak var view: AuthViewInput!
	var interactor: AuthInteractorInput!
	var router: AuthRouterInput!

	func viewIsReady() {
		view.setupInitialState()
		view.onTouchNext = CommandWith<String> { [weak self] text in
			self?.interactor.verify(phoneNumber: text)
		}
	}
	
}


// MARK: Interactor output protocol

protocol AuthInteractorOutput: class {
	func didSucceed(with verificationCode: String)
	func didFailVerify(with error: Error)
}

extension AuthPresenter: AuthInteractorOutput {
	func didSucceed(with verificationCode: String) {
		print("V code:", verificationCode)
		view.viewPage = .second
	}
	
	func didFailVerify(with error: Error) {
		view.displayAlert(with: error.localizedDescription)
	}

}
